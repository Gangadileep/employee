<!DOCTYPE html>
<html lang="en">
<head>
  <title> Employee Registration </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script
  src=https://code.jquery.com/jquery-3.6.0.min.js
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
  <script src=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
    

<nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
      <span class="navbar-text">
      
      </span>
    </div>
  </div>
</nav>

 

      
    </div>
    <div class="col-sm-8 text-left">
      <h2 id="Heading">Add Project </h2>
      <form class="form-horizontal" id="text" role="form" action="projectlist.html" >
        <h2> </h2>
        
      <br>

        <div class="form-group">
            <label for="password" class="name" >Employee Id</label>
            
            <div class="col-sm-9">
                <input type="tel" id="empid" placeholder="employee id" required class="form-control">
            </div>
        </div>
        <br>
       
        <div class="form-group">
            <label for="password" class="name">Project Name</label>
            <div class="col-sm-9">
                <input type="language" id="projectname" placeholder="Project Name" required class="form-control">
            </div>
        </div>
        <br>
        
            
            
            <button type="submit" required class="btn btn-primary btn-block " onclick=" updatepro()">Submit</button>
        </div>
        
       
    
        
        </div> 
            <!-- <div >
                <button type="submit " class="btn btn-primary btn-block ">Edit <te</button>
            </div> -->
        </div>
    </form> <!-- /form -->
      
    </div>
  </div>
</div>

<footer class="container-fluid text-center">
  <p>  </p>
</footer>

<footer class="container-fluid text-center">
  <p>  </p>
</footer>
<script>
 
 let id;
    (function () {
      let params = (new URL(document.location)).searchParams;
      id = params.get("Id");
      let forms = document.querySelector('form');
      let data
      var request = new XMLHttpRequest();
      request.onload = function () {
        if (this.readyState === 4 && this.status === 200) {
          data = JSON.parse(this.responseText);
          console.log(data)

          
          
          document.getElementById("empid").value = data.emp_id;
          document.getElementById("projectname").value = data.project_name;
         
        }
      }

      request.open("GET", `http://127.0.0.1:5000/getproject/${id}`);
      // Sending the request to the server
      request.send();

    })()


    function updatepro(){

      let project={
        project_id:id,
        emp_id:document.getElementById("empid").value,
        project_name:document.getElementById("projectname").value,
        
      }
      console.log(project)
      var request= new XMLHttpRequest();
      request.onload = function (){

        if (this.readyState === 4 && this.status === 200) {
          console.log(this)
      }

    
    }
    request.open("PUT", `http://127.0.0.1:5000/update/${id}`);
      request.setRequestHeader('Content-type', 'application/json; charset=UTF-8');
      console.log(JSON.stringify(project))
      // Sending the request to the server
      request.send(JSON.stringify(project));
      // window.open("projectlist.html")
    }


// ;
    
    // console.log(tbody);

  </script>

</body>
</html>
